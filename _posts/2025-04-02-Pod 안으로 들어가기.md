---
layout: post
category: k8s
---
# test
##  🌊 Under the Pod 🌊
### 1️⃣ Pod 내부에서 kubectl 사용하기

먼저 아래 명령어를 통해 kubectl 이 설치되어있는 새로운 파드를 생성한 후 파드에 접속합니다. 

```shell
kubectl run kubectl --image bitnami/kubectl:latest --command -- sleep infinity
kubectl exec -it kubectl -- /bin/bash
```

파드 내부에서 아래 명령어를 실행시킬 경우 다음과 같은 에러 메세지를 확인 하실 수 있습니다.

```shell
kubectl get pod
```
![week401](../images/week401.png)

해당 에러메세지의 경우 해당 파드가 생성되어있는 Default 네임스페이스의 Default Service Account 를 사용하며, 해당 Service Account에 Kubectl 명령을 통해 클러스터 내부 파드를 조회할 권한이 없다는 오류 입니다.

그렇기에 해당 파드에서 사용중인 Default Service Account에 이를 사용할 수 있는 권한
 

#### 1.1 Pod 생성 및 오류 확인
먼저 파드를 생성합니다. 현재 생성된 파드에 대해 
#### 1.2 Service Account 생성
### 2️⃣ Pod 내부에서 AWS CLI 사용하기
#### 2.1 Pod 생성 및 오류 확인
#### 2.2 IAM Role 생성 및 Service Account 연결
### 3️⃣ Pod 내부에서 Cross Account 사용하여 타 계정의 리소스 접근하기
### 4️⃣ Pod Identity Agent 사용하기

